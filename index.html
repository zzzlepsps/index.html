<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ù–∞—à–µ –∑–≤—ë–∑–¥–Ω–æ–µ –Ω–µ–±–æ üí´</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body { margin:0; height:100%; background:#000; overflow:hidden; font-family:'Segoe Script', cursive; }
    #infoBox { position:absolute; display:none; pointer-events:none; background:rgba(0,0,0,0.7); color:#fff; padding:8px 12px; border-radius:8px; font-size:1rem; transform:translate(-10px,-40px);}
    #title { position:absolute; top:15px; right:25px; color:#ffd54f; font-size:1.4rem;}
  </style>
</head>
<body>
  <div id="infoBox"></div>
  <div id="title">‚òÖ –ù–∞—à–∏ –∑–≤—ë–∑–¥—ã –ª—é–±–≤–∏ ‚òÖ</div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.161.0/examples/js/controls/OrbitControls.js"></script>

 <script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.161.0/examples/js/controls/OrbitControls.js"></script>

<script>
  // Telegram API
  const tg = window.Telegram?.WebApp;
  if (tg) {
    tg.expand();
    tg.MainButton.text = "–ó–∞–∫—Ä—ã—Ç—å üíï";
    tg.MainButton.show();
    tg.MainButton.onClick(() => tg.close());
  }

  // === 1. –ù–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥—ë–º –ø–æ–∫–∞ Telegram –∑–∞–¥–∞—Å—Ç —Ä–∞–∑–º–µ—Ä—ã ===
  window.addEventListener("load", () => {
    setTimeout(initStars, 300);
  });

  function initStars() {
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
    camera.position.set(0, 0, 200);
    
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞
    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // === –ó–≤—ë–∑–¥—ã ===
    const starGeo = new THREE.BufferGeometry();
    const starCount = 2000;
    const pos = new Float32Array(starCount * 3);
    for (let i = 0; i < starCount * 3; i++) pos[i] = (Math.random() - 0.5) * 2000;
    starGeo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
    const starMat = new THREE.PointsMaterial({ color: 0xffffff, size: 1.2 });
    const stars = new THREE.Points(starGeo, starMat);
    scene.add(stars);

    // === –ü–∞–º—è—Ç–Ω—ã–µ –∑–≤–µ–∑–¥—ã ===
    const memories = [
      { text: "üí´ 5 –º–∞—è ‚Äî –ø–µ—Ä–≤–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ", color: 0xff6b81 },
      { text: "üåô 17 –∏—é–Ω—è ‚Äî –ø–µ—Ä–≤—ã–π –ø–æ—Ü–µ–ª—É–π", color: 0xffd700 },
      { text: "üíû 22 –∏—é–ª—è ‚Äî –º–æ—Ä–µ", color: 0x7fff00 },
      { text: "üåü 1 —è–Ω–≤–∞—Ä—è ‚Äî –ù–æ–≤—ã–π –≥–æ–¥", color: 0x87cefa },
      { text: "üíñ 17 –æ–∫—Ç—è–±—Ä—è ‚Äî –≥–æ–¥ –≤–º–µ—Å—Ç–µ", color: 0xff1493 }
    ];

    const spheres = [];
    const geo = new THREE.SphereGeometry(6, 24, 24);
    memories.forEach((m, i) => {
      const mat = new THREE.MeshBasicMaterial({ color: m.color });
      const s = new THREE.Mesh(geo, mat);
      const angle = (i / memories.length) * Math.PI * 2;
      s.position.set(Math.cos(angle) * 80, Math.sin(angle) * 80, 0);
      s.userData = { text: m.text };
      scene.add(s);
      spheres.push(s);
    });

    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    const info = document.getElementById("infoBox");
    window.addEventListener("mousemove", e => {
      mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
      raycaster.setFromCamera(mouse, camera);
      const hit = raycaster.intersectObjects(spheres);
      if (hit.length > 0) {
        info.style.display = "block";
        info.style.left = e.clientX + "px";
        info.style.top = e.clientY + "px";
        info.textContent = hit[0].object.userData.text;
      } else info.style.display = "none";
    });

    // === –ê–Ω–∏–º–∞—Ü–∏—è ===
    function animate() {
      requestAnimationFrame(animate);
      stars.rotation.y += 0.0007;
      spheres.forEach((s, i) => s.rotation.y += 0.01 + i * 0.002);
      renderer.render(scene, camera);
    }
    animate();
  }
</script>

</body>
</html>
